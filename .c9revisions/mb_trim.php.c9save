{"ts":1362382347508,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"<?php\r\n/**\r\n * Devious Concepts\r\n * ----------------\r\n * PHP 5.4 functions mb_trim, mb_ltrim, mb_rtrim\r\n * \r\n * @author Kimmo Matias Vuori Liikaluoma <vuoriliikaluoma@gmail.com>\r\n * @copyright Copyleft 2013 Devious Concepts, No rigths reserved.\r\n */\r\n\r\n/**\r\n * Make sure to set mb_iternal_encoding in your project!!\r\n * \r\n * The defualt value of mb_internal_encoding is often ISO-8859-1.\r\n */\r\n#mb_internal_encoding('UTF-8');\r\n\r\nif (extension_loaded('mbstring')) {\r\n\tif (function_exists('mb_internal_encoding') && is_string(mb_internal_encoding())) {\r\n\t\tif (!function_exists('mb_trim')) {\r\n\t\t\tfunction mb_trim($str, $charlist = NULL, $encoding = NULL) {\r\n\t\t\t\tif ($encoding === NULL) {\r\n\t\t\t\t\t$encoding = mb_internal_encoding();\r\n\t\t\t\t}\r\n\t\t\t\tif ($charlist === NULL) {\r\n\t\t\t\t\t$charlist = \"\\\\x{20}\\\\x{9}\\\\x{A}\\\\x{D}\\\\x{0}\\\\x{B}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$chars = preg_split('//u', $charlist, -1, PREG_SPLIT_NO_EMPTY);\r\n\t\t\t\t\tforeach ($chars as &$char) {\r\n\t\t\t\t\t\t$char = \"\\\\x{\" . dechex(substr(mb_encode_numericentity($char, [0x0, 0x10ffff, 0, 0x10ffff], $encoding), 2, -1)) . \"}\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar_dump($chars);\r\n\t\t\t\t\t$charlist = implode('', $chars);\r\n\t\t\t\t}\r\n\t\t\t\t$pattern = '/(^[' . $charlist . ']+)|([' . $charlist . ']+$)/u';\r\n\t\t\t\treturn preg_replace($pattern, '', $str);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttrigger_error('ERROR (mb_trim): \\'mb_trim\\' function is already defined.', E_USER_ERROR);\r\n\t\t}\r\n\t\tif (!function_exists('mb_ltrim')) {\r\n\t\t\tfunction mb_ltrim($str, $charlist = NULL, $encoding = NULL) {\r\n\t\t\t\tif ($encoding === NULL) {\r\n\t\t\t\t\t$encoding = mb_internal_encoding();\r\n\t\t\t\t}\r\n\t\t\t\tif ($charlist === NULL) {\r\n\t\t\t\t\t$charlist = \"\\\\x{20}\\\\x{9}\\\\x{A}\\\\x{D}\\\\x{0}\\\\x{B}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$chars = preg_split('//u', $charlist, -1, PREG_SPLIT_NO_EMPTY);\r\n\t\t\t\t\tforeach ($chars as &$char) {\r\n\t\t\t\t\t\t$char = \"\\\\x{\" . dechex(substr(mb_encode_numericentity($char, [0x0, 0x10ffff, 0, 0x10ffff], $encoding), 2, -1)) . \"}\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar_dump($chars);\r\n\t\t\t\t\t$charlist = implode('', $chars);\r\n\t\t\t\t}\r\n\t\t\t\t$pattern = '/(^[' . $charlist . ']+)/u';\r\n\t\t\t\treturn preg_replace($pattern, '', $str);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttrigger_error('ERROR (mb_trim): \\'mb_ltrim\\' function is already defined.', E_USER_ERROR);\r\n\t\t}\r\n\t\tif (!function_exists('mb_rtrim')) {\r\n\t\t\tfunction mb_rtrim($str, $charlist = NULL, $encoding = NULL) {\r\n\t\t\t\tif ($encoding === NULL) {\r\n\t\t\t\t\t$encoding = mb_internal_encoding();\r\n\t\t\t\t}\r\n\t\t\t\tif ($charlist === NULL) {\r\n\t\t\t\t\t$charlist = \"\\\\x{20}\\\\x{9}\\\\x{A}\\\\x{D}\\\\x{0}\\\\x{B}\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\t$chars = preg_split('//u', $charlist, -1, PREG_SPLIT_NO_EMPTY);\r\n\t\t\t\t\tforeach ($chars as &$char) {\r\n\t\t\t\t\t\t$char = \"\\\\x{\" . dechex(substr(mb_encode_numericentity($char, [0x0, 0x10ffff, 0, 0x10ffff], $encoding), 2, -1)) . \"}\";\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar_dump($chars);\r\n\t\t\t\t\t$charlist = implode('', $chars);\r\n\t\t\t\t}\r\n\t\t\t\t$pattern = '/([' . $charlist . ']+$)/u';\r\n\t\t\t\treturn preg_replace($pattern, '', $str);\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\ttrigger_error('ERROR (mb_trim): \\'mb_rtrim\\' function is already defined.', E_USER_ERROR);\r\n\t\t}\r\n\t} else {\r\n\t\ttrigger_error('ERROR (mb_trim): \\'mb_internal_encoding\\' must be defined in \\'mbstring\\' extention. (Different Version?)', E_USER_ERROR);\r\n\t}\r\n} else {\r\n\ttrigger_error('ERROR (mb_trim): PHP extention \\'mbstring\\' must be loaded.', E_USER_ERROR);\r\n}\r\n"]],"start1":0,"start2":0,"length1":0,"length2":3266}]],"length":3266}
